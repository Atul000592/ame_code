<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<title>AME DashBoard Controller</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css" />
<!-- Custom styles for this template -->
<link rel="stylesheet" href="css/base.css" />
<link rel="stylesheet" href="css/base-responsive.css" />
<link rel="stylesheet" href="css/animate.min.css" />
<link rel="stylesheet" href="css/slicknav.min.css" />
<link rel="stylesheet" href="css/font-awesome.min.css" />
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet"
	type="text/css">
	<script src="js/local/disable-back-button.js"></script>
	 <script src="js/local/resetChangeForget.js"></script>


</head>


<body>


	<div class="d-flex" id="wrapper">
	<div th:replace="~{admin-template/admin-left-menu::admin-left-menu}"></div>
		

		<!-- Page Content -->
		<div id="page-content-wrapper">

			<div th:replace="~{admin-template/nav-bar-bda::sidebar-wrapper-menu-nav-bda}"></div>


			<div class="container-fluid mt-3">

				<!-- Content Row -->

<div class="wisecountnactionbg">

				<div id="b-homedb">

				
						
   
                		<div class="table-responsive">
					<div style="margin-left: 10%; font-size: 20px;color: darkred;">
                       <span th:if="${myVariable == null}" th:text="${message}"></span>
                       </div>
			
				<h5>List of Available Medical Boards</h5>
							<table class="table table-striped table-bordered table-hover"  id="customers" style="font-size: 14px;">
								<thead class="table-light">
																<tr>
										<th>Board Id</th>
                                        <th>Created On</th>
										<th width="30">Medical Examination Type</th>
										<th>Year</th>
										<th>Situated At (Place)</th>
										<th colspan="2" class="text-center">Validity</th>
										<th>Medical Board For</th>
									

										<th colspan="2" class="text-center">Action</th>
									
									</tr>
									<tr>
                                        <th></th>
										<th></th>
										<th></th>
										<th></th>
										<th></th>
										<th class="text-center">From Date</th>
										<th class="text-center">To Date</th>
                                        <th></th>
										<th class="text-center">View</th>
										<th class="text-center">Modify</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="medicalBoard : ${medicalBoardList}"
										th:field="${medicalBoard}" class="memberData">
                                          <td th:text="${medicalBoard.boardId}" id="boardId"></td>
										 <td th:text="${#dates.format(medicalBoard.createdOn,'dd-MMM-yyyy HH:mm')}" id="medicalBoardTodate"></td>
										<td th:text="${medicalBoard.usedFor}" id="usedFor"></td>
											<td th:text="${medicalBoard.boardYear}" id="usedFor"></td>
										<td th:text="${medicalBoard.place}" id="medicalBoardPlace"></td>
										<td th:text="${#dates.format(medicalBoard.fromDate,'dd-MM-yyyy')}"
											id="medicalBoardFromdate"></td>
										<td th:text="${#dates.format(medicalBoard.toDate,'dd-MM-yyyy')}" id="medicalBoardTodate"></td>
										<td>
											  <span th:if="${medicalBoard.gFlag== 1}">Gazetted</span>
                                               <span th:unless="${medicalBoard.gFlag == 1}">Non-Gazetted</span>
										</td>

										
										<!-- <td th:text="${individual.country}"></td>-->
										<td class="text-center">
										<form th:action="@{view-board-details}" method="post" class="m-0">
										<input type="hidden" th:value="${medicalBoard.boardId}"
											id="boardId" name="boardId">
											<!-- <input type="hidden" th:value="${_csrf.token}" name="_csrf"> -->
											<input type="submit" value="View Details" class="btn btn-primary btn-sm btn3d">
											
										</form>
										
											 <!--<i class="fa fa-remove"></i>-->
										</td>
										<td class="text-center">
											<form th:action="@{edit-board-details}" method="post" class="m-0">
										<input type="hidden" th:value="${medicalBoard.boardId}"
											id="boardId" name="boardId">
											<!-- <input type="hidden" th:value="${_csrf.token}" name="_csrf"> -->
											<input type="submit" value="modify"  class="btn btn-info btn-sm btn3d">
											
										</form></td>
									</tr>
								</tbody>
							</table>
						</div>
						   <form th:action="@{bda-dashboard}" method="get">
							   <input type="submit" value="Back" class="btn btn-primary btn-sm float-end">
						   </form>



						<!--</form>-->
					</div>



				</div>
			</div>

		</div>

</div>





	<!-- Bootstrap core JavaScript -->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="js/jquery.slicknav.min.js"></script>
	<!--	<script src="js/dashboard.js"></script>-->
	<!-- Menu Toggle Script -->
	<script>
		$("#menu-toggle").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
		});
	</script>


	<script>
		$(document).ready(function() {
			$('#backtotop').click(function() {
				$("html, body").animate({
					scrollTop : 0
				}, 600);
				return false;
			});
			
			
			
			
			// for Committe submitt
			
			$('#boardUnitMapping').click(function(){	
				var formData = [];
						
				var table =$(tbodyfinal);
				console.log(table.children.length);
				
				var rows = table.find('.memberData');
				var rowData = {};
				if(rows.length!=0){
				for (var i=0; i < rows.length; i++) {
					
					rowData['usedFor'] = $(rows[i]).find('#usedFor').text();
					rowData['medicalBoardPlace'] = $(rows[i]).find('#medicalBoardPlace').text();
					/* rowData['medicalBoardFromdate'] = $(rows[i]).find('#medicalBoardFromdate').text();
					rowData['medicalBoardTodate'] = $(rows[i]).find('#medicalBoardTodate').text(); */
					rowData['boardId'] = $(rows[i]).find('#boardId').val();
					
					rowData['forceNo'] = $(rows[i]).find('#forceSelect :selected').val();
					rowData['unitId'] = $(rows[i]).find('#unitSelect :selected').val();
					rowData['boardAssignedDate'] = $('#boardAssignedDate').val();
					
					
					// set all data
					
					formData.push(rowData);
				}
				
				
				console.log(rowData);
				var datan="hello";
				var data1 = JSON.stringify(rowData);
				
	
			    $.ajax({
			        type: "POST",
			        contentType: "application/json",
			        url: "board-unit-mapping-prefinal",
			        data: data1,
			        dataType: 'json',
			        cache: false,
			        timeout: 600000,
			        success: function (data) {


			            console.log("SUCCESS : ", data);
			            alert("Board Formation was Successfull");
			            rows.remove();
			           //window.location.href ="unit-hospital";
			           //$.redirect("unit-hospital");

			        },
			        error: function(jqXHR, textStatus, errorThrown) {
			            if (jqXHR.status == 400) {
			                // Handle bad request error
			                console.log('Bad request error: ' + jqXHR.responseText);
			            } else {
			                // Handle other errors
			                console.log('Error: ' + errorThrown);
			            }
			        }
			        
			    });
			}
			else{
				 alert("Please chose atleast one member in Board");
			}
				
				// JSON.stringify(formData)
				// form submit
				//$('membersubmitt').submit();
				//form.submit();
				//e.submit();
				//document.membersubmitt.submit();
				
			}
				);

			
					
		
			
			
			
			
		});
			
		
		
			
	</script>



	<script>
	
	function addtoList(e){
		var row =$(e).closest('.memberData');
		
		
		var rowCopy = row.clone(true);
		var len =rowCopy[0].cells.length;
		console.log(len);
		rowCopy[0].deleteCell(4);
		console.log(rowCopy[0].cells.length);
		var col =$(forceSelect);
		
		var colCopy=col.clone(true);
	
		console.log(rowCopy[0].cells[0]);
		rowCopy[0].append(colCopy[0]);
		var colDelete=$(btnDltefromList);
		var colDeleteCopy=colDelete.clone(true);
		//rowCopy[0].append(colDeleteCopy[0].innerHTML);
		console.log(rowCopy[0].cells.length);
		//rowCopy[0].append(colDeleteCopy[0]);
		rowCopy[0].insertCell(-1).appendChild(colDeleteCopy[0])
		
		$('#tbodyfinal').append(rowCopy);
		
		
		
		//cell=rowCopy[0].insertCell(4);
		//rowCopy[0].cells[4].append(col);
		console.log(rowCopy[0].cells.length);
		//table.appendChild(row);
		
	}
		
		

		
	</script>



	<script>
	
	function addUnitList(e){
		//var row =$(e).closest('.memberData');
		
		var fId =  $(e).children("option:selected").val();  
		console.log(fId);
						
		var forceId ={'forceId':fId};
	    $.ajax({
	        type: "POST",
	        contentType: "application/json",
	        url: "get-force-unitList",
	        data: JSON.stringify(forceId),
	        dataType: 'json',
	        cache: false,
	        timeout: 600000,
	        success: function (data) {


	            console.log("SUCCESS : ", data);
	           
	            
	            const dropdown = document.getElementById("unitSelect");
	             dropdown.innerHTML="";
	            for (let i = 0; i < data.length; i++) {
	            	  const option = document.createElement("option");
	            	  option.text = data[i].unitName;
	            	  option.value = data[i].unitId;
	            	  option.setAttribute("data", data[i].forceId);
	            	  dropdown.appendChild(option);
	            	}
	            var row =$('#tbodyfinal');
	            var rows = row[0].rows;
	          
	           
	           rows[0].insertCell(4).appendChild(dropdown);
	           
	            console.log(row);
	            alert("Unit List was Successfull");
	       

	        },
	        error: function (e) {

	            

	            console.log("ERROR : ", e);
	            
	        }
	    });
		
		
		
		// ajax
			
		// in success
		//create an select tag
		//Iterate on list from response...
		//create an option tag for each item..
		
		
		
		
	}
		
		

		
	</script>


	<script>
function deleteFromList(e){
	var row =$(e).closest('.memberData').remove();
	
	
	
	//rowCopy[0].appendChild(colDeleteCopy[0]);
	
	//$('#tbodyfinal').append(rowCopy);
	
	
	
	//cell=rowCopy[0].insertCell(4);
	//rowCopy[0].cells[4].append(col);
	
	//table.appendChild(row);
	
}
	
	



</script>







	<script>
		$('.sub-menu ul').hide();
		$('.sub-sub-menu ul').hide();
		$(".sub-menu a").click(function() {
			$(this).parent(".sub-menu").children("ul").slideToggle("100");
			$(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
		});

		$(".sub-sub-menu a").click(function() {
			$(this).parent(".sub-sub-menu").children("ul").slideToggle("100");
			$(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
		});
	</script>



	<!-- Signup Modal -->
	<div class="modal fade" id="signout-modal">
			<div class="modal-dialog modal-lg modal-dialog-centered">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Sign Out?</h5>

							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<!-- Modal body -->
						<div class="modal-body">
							<p class="text-center">Are you sure you want to Sign Out?</p>
							<form action="sign-out">
								<div class="row">
									<div class="col-md-6">
										<button type="submit" class="btn btn-primary">Sign
											Out</button>
									</div>
									<div class="col-md-6">
										<button type="button" class="btn btn-secondary"
											data-bs-dismiss="modal">Cancel</button>
									</div>

								</div>

							</form>

						</div>
					</div>
				</div>
			</div>
	</div>



	<script src="vendor/jquery-ui/jquery-ui.js"></script>
	<script>
		$(function() {
			$("#sortable-menu").sortable();
			$("#sortable-menu").disableSelection();

			$("#sortable-cards").sortable();
			$("#sortable-cards").disableSelection();
		});
	</script>


	<script>
		$(function() {
			$("#one-item-row").on("click", function() {
				$(".b-customize").addClass("col-lg-12", 300);
				$(".b-customize").removeClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-6", 300);

			});

			$("#two-item-row").on("click", function() {
				$(".b-customize").addClass("col-lg-6", 300);
				$(".b-customize").removeClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-12", 300);

			});

			$("#three-item-row").on("click", function() {
				$(".b-customize").addClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-6", 300);
				$(".b-customize").removeClass("col-lg-12", 300);

			});

		});
	</script>


</body>
</html>