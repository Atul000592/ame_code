<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<title>AME DashBoard Controller</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css" />
<!-- Custom styles for this template -->
<link rel="stylesheet" href="css/base.css" />
<link rel="stylesheet" href="css/base-responsive.css" />
<link rel="stylesheet" href="css/animate.min.css" />
<link rel="stylesheet" href="css/slicknav.min.css" />
<link rel="stylesheet" href="css/font-awesome.min.css" />
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet"
	type="text/css">
	<script src="js/local/disable-back-button.js"></script>

<script src="vendor/charts/Chart.js"></script>
<script src="vendor/charts/moment.min.js"></script>
<script src="vendor/charts/Chart.min.js"></script>
<script src="vendor/charts/utils.js"></script>
<style>
body {
	background-color: #fff;
}

.b-leftmenu ul {
	list-style: none;
	margin: 0;
	padding: 0;
}

.b-leftmenu ul li {
	/* Sub Menu */
	
}

.b-leftmenu ul li a {
	display: block;
	background: #ebebeb;
	padding: 10px 15px;
	color: #333;
	text-decoration: none;
	-webkit-transition: 0.2s linear;
	-moz-transition: 0.2s linear;
	-ms-transition: 0.2s linear;
	-o-transition: 0.2s linear;
	transition: 0.2s linear;
}

.b-leftmenu ul li a:hover {
	background: #f8f8f8;
	color: #515151;
}

.b-leftmenu ul li a .fa {
	width: 16px;
	text-align: center;
	margin-right: 5px;
	float: right;
}

.b-leftmenu ul ul {
	background-color: #ebebeb;
}

.b-leftmenu .sub-menu ul li a {
	background: #f8f8f8;
	border-left: 4px solid transparent;
	padding: 10px 25px;
}

.b-leftmenu .sub-sub-menu ul li a {
	padding: 10px 20px 10px 40px;
}

.b-leftmenu a.b-newpage:hover {
	background: #ebebeb;
	border-left: 4px solid #3498db;
}

.card {
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
	max-width: 300px;
	margin: auto;
	text-align: center;
	font-family: arial;
}

.title {
	color: grey;
	font-size: 14px;
}

button {
	border: none;
	outline: 0;
	display: inline-block;
	padding: 8px;
	color: white;
	background-color: #000;
	text-align: center;
	cursor: pointer;
	width: 100%;
	font-size: 14px;
}

a {
	text-decoration: none;
	font-size: 14px;
	color: black;
}

button:hover, a:hover {
	opacity: 0.7;
}
</style>
</head>


<body>
	<!-- 
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
		<a class="navbar-brand" href="#">Logo</a>
		<ul class="navbar-nav">
			<li class="nav-item">
				<a class="nav-link" href="#">Link</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="#">Link</a>
			</li>
		</ul>
	</nav>
 -->


	<div class="d-flex" id="wrapper">
	<div th:replace="~{admin-template/admin-left-menu::admin-left-menu}"></div>
		<!-- Sidebar -->
		<!-- <div class="dashboard-bgcolor border-right" id="sidebar-wrapper">
			<div class="sidebar-heading text-center text-white"
				style="font-size: 24px">
				<span class="text-uppercase" style="display: inherit;"><img
					alt="" src="images/NIC.png" height="30px" width="60%"> &nbsp;
					AME</span>

			</div>
			<div class="list-group list-group-flush b-leftmenu">

				<ul id="sortable-menu">
					<li><a href=''
						class="dashboard-bgcolor text-white border-bottom b-newpage">Unit
							Hospital dashboard</a></li>
					<li class='sub-menu'><a href='javascript:void(0)'
						class="dashboard-bgcolor border-bottom text-white b-newpage">Unit
							Hospital mapping </a>
						<ul>
							<li><a class="b-newpage" href="unit-hospital">Unit
									Hospital mapping</a></li>
							<li><a class="b-newpage" href='#'>Status</a></li>
							<li><a class="b-newpage" href='#'>Appeal</a></li>
							<li><a class="b-newpage" href='#'>Change of Board</a></li>
							<li class='sub-sub-menu'><a href='javascript:void(0);'
								class="b-newpage">Subordinate AME Status
									<div class='fa fa-caret-down right'></div>
							</a>
								<ul>
									<li><a href='javascript:void(0)' class="b-newpage">Fill AME Details</a></li>
									<li><a href='javascript:void(0);' class="b-newpage">Can Referred For Investigation</a></li>
									<li><a href='javascript:void(0)' class="b-newpage">Upload Documents and Investigations </a></li>
									<li><a href='javascript:void(0)' class="b-newpage">Shape Declaration and Sign </a></li>
									<li><a href='javascript:void(0)' class="b-newpage">Cases For reconsideration</a></li>
								</ul></li>
								
								<li><a class="b-newpage" href='#'>Induction Medical</a></li>
								<li><a class="b-newpage" href='#'>Change of Board</a></li>
						
							
						

						</ul></li>


					<li class='sub-menu'><a href='javascript:void(0)'
						class="dashboard-bgcolor border-bottom text-white b-newpage">Individual
							Unit Hospital mapping </a>
						<ul>
							<li><a class="b-newpage" href="individual-unit-hospital">Individual
									Unit Hospital mapping</a></li>


						</ul></li>




					<li class='sub-menu'><a href='javascript:void(0)'
						class="dashboard-bgcolor border-bottom text-white b-newpage">Health
							Card Self And Subordinate</a>
			</div>
		</div>
		 --><!-- /#sidebar-wrapper -->

		<!-- Page Content -->
		<div id="page-content-wrapper">

			<nav
				class="navbar navbar-expand-lg navbar-light dashboard-bgcolor border-bottom">
				<button class="btn text-white" id="menu-toggle">
					<span style="display: none;">Menu</span> <span class="fas fa-bars"
						style="font-size: 1.4rem"></span>
				</button>

				<!-- Online users -->
				<div class="d-inline-block px-4 py-2 dropdown">
					<div class="dropdown-toggle" data-toggle="dropdown">
						<span class="fas fa-users text-white"
							style="font-size: 20px; cursor: pointer;"></span>
					</div>
					<div class="dropdown-menu b-dropmenu-db">
						<a class="dropdown-item" href="#">User action</a> <a
							class="dropdown-item" href="#">Another user action</a> <a
							class="dropdown-item" href="#">Another user action</a> <a
							class="dropdown-item" href="#">Another user action</a>
					</div>
				</div>

				<button class="navbar-toggler b-dropmenubtn" type="button"
					data-toggle="collapse" data-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent" aria-expanded="false"
					aria-label="Toggle navigation">
					<span class="far fa-caret-square-down"
						style="font-size: 30px; color: #FFF"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav ml-auto mt-2 mt-lg-0">


						<li class="nav-item"><a class="nav-link text-white"
							href="medical-exam">Medical Examination</a></li>
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle text-white" href="#"
							id="navbarDropdown" role="button" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false"> Profile </a>
							<div
								class="dropdown-menu dropdown-menu-right text-center b-dropmenu-db"
								aria-labelledby="navbarDropdown">
								<a class="dropdown-item" href="register-user">Register User</a>
								<a class="dropdown-item" href="email-send">Send Mail</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="javascript:void(0);"
									data-toggle="modal" data-target="#signout-modal">Sign Out</a>

							</div></li>
					</ul>
				</div>
			</nav>


			<div class="container-fluid">

				<!-- Content Row -->



				<div class="my-5" id="b-homedb">

					<div class="container">
						<h4 class="text-center mb-3 b-latest-data">Board unit Mapping</h4>



						<div class="form-group">
							<h2 align="center">List of Board available for Mapping with
								Unit</h2>
							<form th:action="@{/search}" method="get">
								<input type="text" name="keyword" th:value="${keyword}"
									placeholder="Find by IRLA, Name & Designation" size="50">
								<button type="submit" class="btn btn-info">Search</button>
								<button type="submit" class="btn btn-info">Reset</button>
							</form>
							<table class="table table-bordered table-sm mt-2">
								<thead>
									<tr>

										<th>Used For</th>
										<th>Place</th>
										<th>From Date</th>
										<th>To Date</th>

										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="medicalBoard : ${medicalBoardList}"
										th:field="${medicalBoard}" class="memberData">


										<td th:text="${medicalBoard.usedFor}" id="usedFor"></td>
										<td th:text="${medicalBoard.place}" id="medicalBoardPlace"></td>
										<td th:text="${medicalBoard.fromDate}"
											id="medicalBoardFromdate"></td>
										<td th:text="${medicalBoard.toDate}" id="medicalBoardTodate"></td>

										<input type="hidden" th:value="${medicalBoard.boardId}"
											id="boardId">
										<!-- <td th:text="${individual.country}"></td>-->
										<td>
											<button class="btnAddToList" name="btnAddToList"
												onclick="addtoList(this)">add</button> <!--<i class="fa fa-remove"></i>-->
										</td>
									</tr>
								</tbody>
							</table>
						</div>



						<!--</form>-->
					</div>



				</div>
				<div class="my-5" id="b-homedb">
					<div class="container">
						<h4 class="text-center mb-3 b-latest-data">Committe Formation</h4>
						<div class="form-group">
							<h2 align="center">Selected Board For Mapping to a Unit</h2>
							<!--<form th:action="@{/search}" method="get">
					  <input type="text" name="keyword" th:value="${keyword}"  placeholder="Find by IRLA, Name & Designation" size="50" >
					  <button type="submit" class="btn btn-info" >Search</button>
					  <button type="submit" class="btn btn-info" >Reset</button>
					  </form>-->
							<div style="display: none;" class="unitList" id="unitList">

								<select class="unitSelect" id="unitSelect">
									<option value="0">select option</option>

									<!-- <option th:each="option : ${unitList}"
										th:value="${option.unitName}" th:data="${option.forceId}"
										th:text="${option.unitName}"></option> -->
								</select>


							</div>
							<div style="display: none;" class="forceList" id="forceList">

								<select class="forceSelect" id="forceSelect"
									onchange="addUnitList(this)">
									<option value="0">select option</option>
									<option th:each="option : ${forceList}" th:value="${option.forceId}"
										th:data="${option.forceId}" th:text="${option.forceName}"></option>
								</select>


							</div>


							<div style="display: none;" class="deleteFromList"
								id="deleteFromList">

								<button class="btnDltefromList" name="btnDltefromList"
									id='btnDltefromList' onclick="deleteFromList(this)">
									delete</button>
								<!--<i class="fa fa-remove"></i>-->


							</div>

							<!-- <form  action="add-committee-member1"  name="membersubmitt" th:object="${committeeMemberData}"> -->
							<table class="table table-bordered table-sm mt-2"
								id="finallisttable">
								<thead>
									<tr>

										<th>Used For</th>
										<th>Place</th>
										<th>From Date</th>
										<th>To Date</th>

										<th>Force</th>
										<th>Unit</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody class="finallist" name="tbodyfinal" id="tbodyfinal">

								</tbody>
							</table>
					  
					  <label>Board Assigned date</label>
					  <input type="date" name="boardAssignedDate" id="boardAssignedDate">
						</div>



						<button class="btn btn-primary" name="boardUnitMapping"
							id="boardUnitMapping">Submit mapping</button>

						<!--</form>-->

						<!-- </form> -->
					</div>






				</div>

			</div>

		</div>




	</div>
	<!-- /#page-content-wrapper -->

	</div>
	<!-- /#wrapper -->



	<!-- Bootstrap core JavaScript -->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="js/jquery.slicknav.min.js"></script>
	<!--	<script src="js/dashboard.js"></script>-->
	<!-- Menu Toggle Script -->
	<script>
		$("#menu-toggle").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
		});
	</script>


	<script>
		$(document).ready(function() {
			$('#backtotop').click(function() {
				$("html, body").animate({
					scrollTop : 0
				}, 600);
				return false;
			});
			
			
			
			
			// for Committe submitt
			
			$('#boardUnitMapping').click(function(){	
				var formData = [];
						
				var table =$(tbodyfinal);
				console.log(table.children.length);
				
				var rows = table.find('.memberData');
				var rowData = {};
				if(rows.length!=0){
				for (var i=0; i < rows.length; i++) {
					
					rowData['usedFor'] = $(rows[i]).find('#usedFor').text();
					rowData['medicalBoardPlace'] = $(rows[i]).find('#medicalBoardPlace').text();
					/* rowData['medicalBoardFromdate'] = $(rows[i]).find('#medicalBoardFromdate').text();
					rowData['medicalBoardTodate'] = $(rows[i]).find('#medicalBoardTodate').text(); */
					rowData['boardId'] = $(rows[i]).find('#boardId').val();
					
					rowData['forceNo'] = $(rows[i]).find('#forceSelect :selected').val();
					rowData['unitId'] = $(rows[i]).find('#unitSelect :selected').val();
					rowData['boardAssignedDate'] = $('#boardAssignedDate').val();
					
					
					// set all data
					
					formData.push(rowData);
				}
				
				
				console.log(rowData);
				var datan="hello";
				var data1 = JSON.stringify(rowData);
				
	
			    $.ajax({
			        type: "POST",
			        contentType: "application/json",
			        url: "board-unit-mapping-prefinal",
			        data: data1,
			        dataType: 'json',
			        cache: false,
			        timeout: 600000,
			        success: function (data) {


			            console.log("SUCCESS : ", data);
			            alert("Board Formation was Successfull");
			            rows.remove();
			           //window.location.href ="unit-hospital";
			           //$.redirect("unit-hospital");

			        },
			        error: function(jqXHR, textStatus, errorThrown) {
			            if (jqXHR.status == 400) {
			                // Handle bad request error
			                console.log('Bad request error: ' + jqXHR.responseText);
			            } else {
			                // Handle other errors
			                console.log('Error: ' + errorThrown);
			            }
			        }
			        
			    });
			}
			else{
				 alert("Please chose atleast one member in Board");
			}
				
				// JSON.stringify(formData)
				// form submit
				//$('membersubmitt').submit();
				//form.submit();
				//e.submit();
				//document.membersubmitt.submit();
				
			}
				);

			
					
		
			
			
			
			
		});
			
		
		
			
	</script>



	<script>
	
	function addtoList(e){
		var row =$(e).closest('.memberData');
		
		
		var rowCopy = row.clone(true);
		var len =rowCopy[0].cells.length;
		console.log(len);
		rowCopy[0].deleteCell(4);
		console.log(rowCopy[0].cells.length);
		var col =$(forceSelect);
		
		var colCopy=col.clone(true);
	
		console.log(rowCopy[0].cells[0]);
		rowCopy[0].append(colCopy[0]);
		var colDelete=$(btnDltefromList);
		var colDeleteCopy=colDelete.clone(true);
		//rowCopy[0].append(colDeleteCopy[0].innerHTML);
		console.log(rowCopy[0].cells.length);
		//rowCopy[0].append(colDeleteCopy[0]);
		rowCopy[0].insertCell(-1).appendChild(colDeleteCopy[0])
		
		$('#tbodyfinal').append(rowCopy);
		
		
		
		//cell=rowCopy[0].insertCell(4);
		//rowCopy[0].cells[4].append(col);
		console.log(rowCopy[0].cells.length);
		//table.appendChild(row);
		
	}
		
		

		
	</script>



	<script>
	
	function addUnitList(e){
		//var row =$(e).closest('.memberData');
		
		var fId =  $(e).children("option:selected").val();  
		console.log(fId);
						
		var forceId ={'forceId':fId};
	    $.ajax({
	        type: "POST",
	        contentType: "application/json",
	        url: "get-force-unitList",
	        data: JSON.stringify(forceId),
	        dataType: 'json',
	        cache: false,
	        timeout: 600000,
	        success: function (data) {


	            console.log("SUCCESS : ", data);
	           
	            
	            const dropdown = document.getElementById("unitSelect");
	             dropdown.innerHTML="";
	            for (let i = 0; i < data.length; i++) {
	            	  const option = document.createElement("option");
	            	  option.text = data[i].unitName;
	            	  option.value = data[i].unitId;
	            	  option.setAttribute("data", data[i].forceId);
	            	  dropdown.appendChild(option);
	            	}
	            var row =$('#tbodyfinal');
	            var rows = row[0].rows;
	          
	           
	           rows[0].insertCell(4).appendChild(dropdown);
	           
	            console.log(row);
	            alert("Unit List was Successfull");
	       

	        },
	        error: function (e) {

	            

	            console.log("ERROR : ", e);
	            
	        }
	    });
		
		
		
		// ajax
			
		// in success
		//create an select tag
		//Iterate on list from response...
		//create an option tag for each item..
		
		
		
		
	}
		
		

		
	</script>


	<script>
function deleteFromList(e){
	var row =$(e).closest('.memberData').remove();
	
	
	
	//rowCopy[0].appendChild(colDeleteCopy[0]);
	
	//$('#tbodyfinal').append(rowCopy);
	
	
	
	//cell=rowCopy[0].insertCell(4);
	//rowCopy[0].cells[4].append(col);
	
	//table.appendChild(row);
	
}
	
	



</script>







	<script>
		$('.sub-menu ul').hide();
		$('.sub-sub-menu ul').hide();
		$(".sub-menu a").click(function() {
			$(this).parent(".sub-menu").children("ul").slideToggle("100");
			$(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
		});

		$(".sub-sub-menu a").click(function() {
			$(this).parent(".sub-sub-menu").children("ul").slideToggle("100");
			$(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
		});
	</script>



	<!-- Signup Modal -->
	<div class="modal fade" id="signout-modal">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">

				<!-- Modal Header -->
				<div class="modal-header text-center d-block p-5 border-bottom-0">
					<h3 class="modal-title">Sign Out?</h3>
					<button type="button" class="close position-absolute"
						style="right: 15px; top: 8px;" data-dismiss="modal">&times;</button>
				</div>

				<!-- Modal body -->
				<div class="modal-body">
					<p class="text-center">Are you sure you want to Sign Out?</p>
					<div class="text-center py-4">
						<form action="sign-out">
							<button type="submit" class="btn btn-primary b-btn mx-3">Sign
								Out</button>
							<button class="btn btn-secondary mx-3" data-dismiss="modal">Cancel</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>



	<script src="vendor/jquery-ui/jquery-ui.js"></script>
	<script>
		$(function() {
			$("#sortable-menu").sortable();
			$("#sortable-menu").disableSelection();

			$("#sortable-cards").sortable();
			$("#sortable-cards").disableSelection();
		});
	</script>


	<script>
		$(function() {
			$("#one-item-row").on("click", function() {
				$(".b-customize").addClass("col-lg-12", 300);
				$(".b-customize").removeClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-6", 300);

			});

			$("#two-item-row").on("click", function() {
				$(".b-customize").addClass("col-lg-6", 300);
				$(".b-customize").removeClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-12", 300);

			});

			$("#three-item-row").on("click", function() {
				$(".b-customize").addClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-6", 300);
				$(".b-customize").removeClass("col-lg-12", 300);

			});

		});
	</script>


</body>
</html>