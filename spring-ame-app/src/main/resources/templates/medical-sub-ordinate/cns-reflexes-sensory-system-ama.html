<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>AME DashBoard Controller</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<div th:replace="~{medical-sub-ordinate/master-doc::master-wrapper-doc}"></div>


<style>
input.invalid {
	background-color: #ffdddd;
}

/* Hide all steps by default: */
.tab {
	display: none;
}

button {
	background-color: #04AA6D;
	color: #ffffff;
	border: none;
	padding: 10px 20px;
	font-size: 17px;
	font-family: Raleway;
	cursor: pointer;
}

button:hover {
	opacity: 0.8;
}

.step {
	height: 15px;
	width: 15px;
	margin: 0 2px;
	background-color: #bbbbbb;
	border: none;
	border-radius: 50%;
	display: inline-block;
	opacity: 0.5;
}

.step.active {
	opacity: 1;
}

.tabstatus.active {
	opacity: 1;
}

/* Mark the steps that are finished and valid: */
.step.finish {
	background-color: #04AA6D;
}

#regForm {
	display: flow-root
}

.form-horizontal {
	float: left;
	width: 100%;
}

#menu2 .inputText {
	width: 50%
}

#menu2 .inputText input {
	width: 100%;
}

.inputText {
	float: right;
	width: 60%;
	margin: 0px 0px 5px 0px;
}

.inputText input {
	width: 60%;
}

.form-horizontal .col-md-6 {
	margin-bottom: 0px;
	min-height: 50px;
}

.tabTop {
	float: left;
	width: 100%;
	margin-bottom: 20px;
	display: flex;
	justify-content: center;
}

.tabTop li {
	background: #07507b;
	border-radius: 24px;
	margin: 0 5px 15px 5px;
}

.tabTop li a {
	padding: 10px 15px;
	display: block;
	color: #fff;
	text-decoration: none;
}

.tabTop li:last-child {
	border: none;
}

.tabTop li.active, .tabTop li:focus, .tabTop li:hover, .tabTop li.active a:hover,
	.nav-tabs>li>a:hover {
	background: #a9c659;
	border-radius: 24px;
}

.hidden{
display:none;
}
</style>
</head>


<body>


	<div class="d-flex" id="wrapper">

		<!-- Sidebar -->
		<div
			th:replace="~{medical-sub-ordinate/left-menu-ama::sidebar-wrapper-menu-ama}"></div>

		<!-- /#sidebar-wrapper -->

		<!-- Page Content -->
		<div id="page-content-wrapper">

			<div
				th:replace="~{medical-sub-ordinate/nav-bar::sidebar-wrapper-menu-nav-ama}"></div>

			<div class="container mt-3">

				<div class="wisecountnactionbg">

					<div th:replace="~{medical-sub-ordinate/inner-user-details::sidebar-wrapper-inner-user-details}"/>

					<!-- candidate details end-->


					<div id="loading-overlay">
					
						<div class="spinner"></div>
                    
                    </div>

<button class="btn btn-info float-end" type="button" id="load-previous-ame-form-data">Load previous AME data</button>

					<div class="proc-box py-2 px-3 text-start">

						<form id="regForm" method="Post"
							th:action="@{/save-assessment-cns-cnm-reflexes-ama}">
							<h4>
								<b>Physical General Examination</b>
							</h4>
							<!-- One "tab" for each step in the form: -->

							<ul class="nav nav-tabs tabTop">

								<!-- <li><a data-toggle="tab" href="#menu2">Respiratory System</a></li> -->
								<li class="tabstatus"><a href="#menu1">Center Nervous
										System & Cranial nerves</a></li>
								<li class="tabstatus"><a href="#menu2">Reflexes &
										Sensory System</a></li>


							</ul>



							<div id="menu1" class="tab">

								<div class="form-horizontal">
								<h6><b>Higher Functions</b></h6>

									<div class="row mb-3">
										<label class="col-2 col-form-label">Memory(Recent &
											Remote)</label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.cns.memoryRecentRemote}"
												class="form-select" id="memoryRecentRemote">
												<option th:value="${examDtoRequest.cns.memoryRecentRemote}"
													th:text="*{examDtoRequest.cns.memoryRecentRemote}"></option>
												<option th:each="innerList : ${cnsDropDown.c1}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select> <span id="memoryRecentRemote_error" class="error"></span>
										</div>


										<label class="col-2 col-form-label">Intelligence </label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.cns.intelligence}"
												class="form-select" id="intelligence" required>
												<option th:value="${examDtoRequest.cns.intelligence}"
													th:text="*{examDtoRequest.cns.intelligence}"></option>
												<option th:each="innerList : ${cnsDropDown.c2}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select> <span id="intelligence_error" class="error"></span>

										</div>


									</div>


									<div class="row mb-3">
										<label class="col-2 col-form-label">Personality</label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.cns.personality}"
												class="form-select" id="personality" required>
												<option th:value="${examDtoRequest.cns.personality}"
													th:text="*{examDtoRequest.cns.personality}"></option>
												<option th:each="innerList : ${cnsDropDown.c2}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select> <span id="personality_error" class="error"></span>
										</div>


										<label class="col-2 col-form-label">Orientation(time,place
											&person) </label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.cns.orientation}"
												id="orientation"> <span id="orientation_error"
												class="error"></span>

										</div>


									</div>
									<!-- -------------------------------------------------------------------------------------------------------------------------- -->
									<div class="row mb-3">
										<label class="col-2 col-form-label">Cranial Nerves</label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.cranialNervesMeningealSign.cranialNerves}"
												id="cranialNerves" /> <span id="cranialNerves_error"
												class="error"></span>
										</div>


										<label class="col-2 col-form-label">Meningeal signs,
											if any</label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.cranialNervesMeningealSign.meningealSignIfAny}"
												id="meningealSignIfAny"> <span
												id="meningealSignIfAny_error" class="error"></span>
										</div>


									</div>

									<hr>
									<!--===================================================================================================  -->
								</div>
						
										<h6><b>Motor System</b></h6>
						




								<!--  -->
								<div class="row mb-3">
									<label class="col-2 col-form-label">Nutrition of
										Muscles</label>
									<div class="col-4 col-auto">
										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.nutritionOfMuscles}"
											class="form-select" id="nutritionOfMuscles" required>
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.nutritionOfMuscles}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.nutritionOfMuscles}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c4}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="nutritionOfMuscles_error" class="error"></span>
									</div>


									<label class="col-2 col-form-label">Wasting</label>
									<div class="col-4 col-auto">

										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.wasting}"
											class="form-select" id="wasting" required>
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.wasting}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.wasting}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c5}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="wasting_error" class="error"></span>
									</div>


								</div>





								<!--  -->


								<!--  -->
								<div class="row mb-3">
									<label class="col-2 col-form-label">Tone</label>
									<div class="col-4 col-auto">
										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.tone}"
											class="form-select" id="tone" required>
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.tone}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.tone}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c6}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="tone_error" class="error"></span>

									</div>


									<label class="col-2 col-form-label">Coordination</label>
									<div class="col-4 col-auto">

										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.coordination}"
											class="form-select" id="coordination" required>
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.coordination}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.coordination}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c7}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="coordination_error" class="error"></span>


									</div>


								</div>





								<!--  -->




								<!--  -->
								<div class="row mb-3">
									<label class="col-2 col-form-label">Abnormal
										movement/Fasciculation</label>
									<div class="col-4 col-auto">
										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.abnormalMovementFasiculation}"
											class="form-select" id="abnormalMovementFasiculation">
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.abnormalMovementFasiculation}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.abnormalMovementFasiculation}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c8}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="abnormalMovementFasiculation_error" class="error"></span>
									</div>


									<label class="col-2 col-form-label">Power</label>
									<div class="col-4 col-auto">
										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.power}"
											class="form-select" id="power">
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.power}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.power}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c9}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="power_error" class="error"></span>

									</div>


								</div>





								<!--  -->

								<div class="row mb-3">

									<label class="col-2 col-form-label">DTR</label>
									<div class="col-4 col-auto">
										<select
											th:field="*{examDtoRequest.cranialNervesMeningealSign.dtr}"
											class="form-select" id="dtr">
											<option
												th:value="${examDtoRequest.cranialNervesMeningealSign.dtr}"
												th:text="*{examDtoRequest.cranialNervesMeningealSign.dtr}">
											</option>
											<option th:each="innerList : ${cnsDropDown.c10}"
												th:text="${innerList.value}" th:value="${innerList.value}">
											</option>
										</select> <span id="dtr_error" class="error"></span>
									</div>


								</div>



							</div>


							<div id="menu2" class="tab">

								<div class="form-horizontal">
								<h6><b>Reflexes</b></h6>
								




									<div class="row mb-3">
										<label class="col-2 col-form-label">Plantar-Reflexes</label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.reflexes.plantar}"
												class="form-select" id="plantar" required>
												<option th:value="${examDtoRequest.reflexes.plantar}"
													th:text="*{examDtoRequest.reflexes.plantar}"></option>
												<option th:each="innerList : ${cnsDropDown.c13}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select>
										</div>


										<label class="col-2 col-form-label">Abdominal &
											CremastericReflexes </label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.reflexes.abdominal}"
												class="form-select" id="abdominal" required>
												<option th:value="${examDtoRequest.reflexes.abdominal}"
													th:text="*{examDtoRequest.reflexes.abdominal}"></option>
												<option th:each="innerList : ${cnsDropDown.c14}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select>

										</div>


									</div>




									<div class="row mb-3">
										<label class="col-2 col-form-label">Cerebellar Signs</label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.reflexes.cerebellarSign}"
												class="form-select" id="cerebellarSign" required>
												<option th:value="${examDtoRequest.reflexes.cerebellarSign}"
													th:text="*{examDtoRequest.reflexes.cerebellarSign}">
												</option>
												<option th:each="innerList : ${cnsDropDown.c11}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select>
										</div>


										<label class="col-2 col-form-label">Gower's Sign </label>
										<div class="col-4 col-auto">
											<select th:field="*{examDtoRequest.reflexes.gowerSign}"
												class="form-select" id="gowerSign" required>
												<option th:value="${examDtoRequest.reflexes.gowerSign}"
													th:text="*{examDtoRequest.reflexes.gowerSign}"></option>
												<option th:each="innerList : ${cnsDropDown.c12}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select>

										</div>


									</div>

<hr>

							<h6><b>Sensory System</b></h6> 



									<div class="row mb-3">
										<label class="col-2 col-form-label">Reflexes</label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.sensorysystem.reflexes}" id ="reflexes" required />
										</div>


										<label class="col-2 col-form-label">Romberg's Sign </label>
										<div class="col-4 col-auto">
											<select
												th:field="*{examDtoRequest.sensorysystem.rombergSign}"
												class="form-select" id="rombergSign" required>
												<option
													th:value="${examDtoRequest.sensorysystem.rombergSign}"
													th:text="*{examDtoRequest.sensorysystem.rombergSign}">
												</option>
												<option th:each="innerList : ${cnsDropDown.c15}"
													th:text="${innerList.value}" th:value="${innerList.value}">
												</option>
											</select>

										</div>


									</div>



									<div class="row mb-3">
										<label class="col-2 col-form-label">SLR (Right) </label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.sensorysystem.slrTestLimbRight}"
												id="slrTestLimbRight" required />
										</div>

										<label class="col-2 col-form-label">SLR (Left)</label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.sensorysystem.slrTestLimbLeft}"
												id="slrTestLimbLeft" required />
										</div>
									</div>


									<div class="row mb-3">
										<label class="col-2 col-form-label">Finger Nose Test </label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.sensorysystem.fingerNoseTest}"
												id="fingerNoseTest" required />
										</div>

										<label class="col-2 col-form-label">Skull & Bone</label>
										<div class="col-4 col-auto">
											<input type="text" class="form-control"
												th:field="*{examDtoRequest.sensorysystem.skullAndBone}"
												id="skullAndBone" required />
										</div>
									</div>



									<input type="hidden" th:value="${_csrf.token}" name="_csrf">
									<input type="hidden" name="forcepersonalId" th:value="${forcepersonalId}"> 
									<input type="hidden" name="ameId" th:value="${ameId}" id="ameId">


								</div>
							</div>

							<div>

							<hr>
							<div class="d-grid gap-2 d-md-block">
								<button type="button" class="btn btn-secondary"
									onclick="backToHome()" style="width: 100px; float: left;">Back</button>
								<button class="btn btn-primary" type="button" id="nextBtn"
									style="width: 100px; float: right;">Next</button>
								<button class="btn btn-success hidden me-3" type="submit"
									id="submit-button" style="width: 100px; float: right;">Submit</button>
								<button class="btn btn-info me-3" type="button" id="prevBtn"
									onclick="nextPrev(-1)"
									style="width: 100px; display: none; float: right;">Previous</button>


							</div>

								<div style="text-align: center; margin-top: 40px;">
									<span class="step"></span> <span class="step"></span>


								</div>
							</div>



						</form>



					</div>

					<form th:action="@{/back-to-index-page-ama}" method="post" id="back-to-home">
					
					<input type="hidden" name="forcepersonalId" th:value="${forcepersonalId}"> 
					<input type="hidden" th:value="${candidateForcePersonnelId}" name="candidateForcePersonnelId" id="candidateForcePersonnelId">
					<input type="hidden" name="ameId" th:value="${ameId}">


					</form>


<div th:replace="~{medical-sub-ordinate/alert-modal::message-alert-modal}"></div>


				</div>
				<!-- /#page-content-wrapper -->

			</div>
			<!-- /#wrapper -->

		</div>
	</div>




<script>
		document.addEventListener("DOMContentLoaded", function() {
			setDefaultValues();
		});
		</script>




	<!-- Menu Toggle Script -->
	<script>
		$("#menu-toggle").click(function (e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
		});
	</script>
	<script>
function backToHome(){
	
	$("#back-to-home").submit();
	}

</script>

	<script>
		$(document).ready(function () {
			$('#backtotop').click(function () {
				$("html, body").animate({
					scrollTop: 0
				}, 600);
				return false;
			});
		});
	</script>


	<script>
		$('.sub-menu ul').hide();
		$('.sub-sub-menu ul').hide();
		$(".sub-menu a").click(function () {
			$(this).parent(".sub-menu").children("ul").slideToggle("100");
			$(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
		});

		$(".sub-sub-menu a").click(function () {
			$(this).parent(".sub-sub-menu").children("ul").slideToggle("100");
			$(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
		});
	</script>



	<!-- Signup Modal -->
	<div class="modal fade" id="signout-modal" data-bs-backdrop="static"
		data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Sign Out?</h5>

						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<!-- Modal body -->
					<div class="modal-body">
						<p class="text-center">Are you sure you want to Sign Out?</p>
						<form action="sign-out">
							<div class="row">
								<div class="col-md-6">
									<button type="submit" class="btn btn-primary">Sign Out</button>
								</div>
								<div class="col-md-6">
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">Cancel</button>
								</div>

							</div>

						</form>
					</div>
				</div>
			</div>
		</div>
	</div>



	<script src="vendor/jquery-ui/jquery-ui.js"></script>
	<script>
		$(function () {
			$("#sortable-menu").sortable();
			$("#sortable-menu").disableSelection();

			$("#sortable-cards").sortable();
			$("#sortable-cards").disableSelection();
		});
	</script>


	<script>
		$(function () {
			$("#one-item-row").on("click", function () {
				$(".b-customize").addClass("col-lg-12", 300);
				$(".b-customize").removeClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-6", 300);

			});

			$("#two-item-row").on("click", function () {
				$(".b-customize").addClass("col-lg-6", 300);
				$(".b-customize").removeClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-12", 300);

			});

			$("#three-item-row").on("click", function () {
				$(".b-customize").addClass("col-lg-4", 300);
				$(".b-customize").removeClass("col-lg-6", 300);
				$(".b-customize").removeClass("col-lg-12", 300);

			});

		});
	</script>
	<script>
		var currentTab = 0; // Current tab is set to be the first tab (0)
		showTab(currentTab); // Display the current tab

		function showTab(n) {
			// This function will display the specified tab of the form...

			var x = document.getElementsByClassName("tab");
			x[n].style.display = "block";
			//... and fix the Previous/Next buttons:

			if (n == 0) {
				document.getElementById("prevBtn").style.display = "none";
				document.getElementById("nextBtn").classList.remove("hidden");
				document.getElementById("submit-button").classList.add("hidden");
			} else {
				document.getElementById("prevBtn").style.display = "inline";
			}
			if (n == (x.length - 1)) {
				document.getElementById("nextBtn").classList.add("hidden");
				document.getElementById("submit-button").classList.remove("hidden");
			} else {
				document.getElementById("nextBtn").innerHTML = "Next";
			}
			//... and run a function that will display the correct step indicator:
			fixStepIndicator(n);
			fixTabIndicator(n)
		}

		function nextPrev(n) {
			// This function will figure out which tab to display
			var x = document.getElementsByClassName("tab");
			// Exit the function if any field in the current tab is invalid:
			if (n == 1 && !validateForm()) return false;
			// Hide the current tab:
			x[currentTab].style.display = "none";
			// Increase or decrease the current tab by 1:
			currentTab = currentTab + n;
			// if you have reached the end of the form...
			if (currentTab >= x.length) {
				// ... the form gets submitted:
				document.getElementById("regForm").submit();
				return false;
			}
			// Otherwise, display the correct tab:
			showTab(currentTab);
		}

		function validateForm() {
			// This function deals with validation of the form fields
			var x, y, i, valid = true;
			x = document.getElementsByClassName("tab");
			y = x[currentTab].getElementsByTagName("input");
			// A loop that checks every input field in the current tab:
			for (i = 0; i < y.length; i++) {
				// If a field is empty...
				if (y[i].value == "") {
					// add an "invalid" class to the field:
					y[i].className += " invalid";
					// and set the current valid status to false
					valid = false;
				}
			}
			// If the valid status is true, mark the step as finished and valid:
			if (valid) {
				document.getElementsByClassName("step")[currentTab].className += " finish";
			}
			return valid; // return the valid status
		}

		function fixStepIndicator(n) {
			// This function removes the "active" class of all steps...
			var i, x = document.getElementsByClassName("step");
			for (i = 0; i < x.length; i++) {
				x[i].className = x[i].className.replace(" active", "");
			}
			//... and adds the "active" class on the current step:
			x[n].className += " active";
		}
		function fixTabIndicator(n) {
			// This function removes the "active" class of all steps...
			var i, x = document.getElementsByClassName("tabstatus");
			for (i = 0; i < x.length; i++) {
				x[i].className = x[i].className.replace(" active", "");
			}
			//... and adds the "active" class on the current step:
			x[n].className += " active";
		}
	</script>
	
	<script>
$(document).ready(function() {
	    $('#nextBtn').click(function(event) {
		event.preventDefault();
		
		$('#loading-overlay').show();
		$('body').addClass('loading');
        
		var ameId=$("#ameId").val();
		var higherFunctions=$("#higherFunctions").val();
		var memoryRecentRemote=$("#memoryRecentRemote").val();
		var intelligence=$("#intelligence").val();
		var personality=$("#personality").val();
		var orientation=$("#orientation").val();
		
		var cranialNerves=$("#cranialNerves").val();
		var meningealSignIfAny=$("#meningealSignIfAny").val();
		var nutritionOfMuscles=$("#nutritionOfMuscles").val();
		var wasting=$("#wasting").val();
		var tone=$("#tone").val();
		var coordination=$("#coordination").val();
		var abnormalMovementFasiculation=$("#abnormalMovementFasiculation").val();
		var power=$("#power").val();
		var dtr=$("#dtr").val();
		
		
		
		var cnsData={
				ameId:ameId,
                memoryRecentRemote:memoryRecentRemote,
				intelligence:intelligence,
				personality:personality,
				orientation:orientation,
		};
		var cranialNervesData=
		       {
				ameId:ameId,
				cranialNerves:cranialNerves,
				meningealSignIfAny:meningealSignIfAny,
		 		nutritionOfMuscles:nutritionOfMuscles,
				wasting:wasting,
				tone:tone,
				coordination:coordination,
				abnormalMovementFasiculation: abnormalMovementFasiculation,
				power:power,
				dtr:dtr
				
				
		};
		
		var dataToSend={
				cnsData:cnsData,
				cranialNervesData:cranialNervesData
				
		}
		
		
		
				
     /* ===================header==================== */
		var token = $("meta[name='_csrf']").attr("content");
		var header = $("meta[name='_csrf_header']").attr("content");
		$('.error').text('');

    $.ajax({
			type: 'POST',
			url: 'validate-cns-and-cranial-nerves',
			data:JSON.stringify(dataToSend),
			contentType: 'application/json',
			beforeSend: function(xhr) {
				xhr.setRequestHeader(header, token);
			},
			success: function(response) {
				if (response.isValid) {
					nextPrev(1);
					 }

				else {  
					
					$.each(response.errors, function(field, errorMessage) {
						 $('#' + field + '_error').text(errorMessage);
						 });
					}
				
},
complete: function() {
    $('#loading-overlay').hide();
    $('body').removeClass('loading');
},
			error: function(xhr, status, error) {

				alert("Please fill the form again somthing went WRONG!");
				console.error(error);
			}
		});
	});
});




</script>
	
	
	
	<script>
$(document).ready(function() {
	$('#regForm').submit(function(event) {
		event.preventDefault();
		
		$('#loading-overlay').show();
		$('body').addClass('loading');
        
		var ameId=$("#ameId").val();
		var higherFunctions=$("#higherFunctions").val();
		var memoryRecentRemote=$("#memoryRecentRemote").val();
		var intelligence=$("#intelligence").val();
		var personality=$("#personality").val();
		var orientation=$("#orientation").val();
		
		var cranialNerves=$("#cranialNerves").val();
		var meningealSignIfAny=$("#meningealSignIfAny").val();
	
		var nutritionOfMuscles=$("#nutritionOfMuscles").val();
		var wasting=$("#wasting").val();
		var tone=$("#tone").val();
		var coordination=$("#coordination").val();
		var abnormalMovementFasiculation=$("#abnormalMovementFasiculation").val();
		var power=$("#power").val();
		var dtr=$("#dtr").val();
		
		var plantar=$("#plantar").val();
		var abdominal=$("#abdominal").val();
		var cerebellarSign=$("#cerebellarSign").val();
		var gowerSign=$("#gowerSign").val();
		
		var reflexes=$("#reflexes").val();
		var rombergSign=$("#rombergSign").val();
		var slrTestLimbRight=$("#slrTestLimbRight").val();
		var slrTestLimbLeft=$("#slrTestLimbLeft").val();
		var fingerNoseTest=$("#fingerNoseTest").val();
		var skullAndBone=$("#skullAndBone").val();
		
		

		var cnsData={
				ameId:ameId,
                memoryRecentRemote:memoryRecentRemote,
				intelligence:intelligence,
				personality:personality,
				orientation:orientation,
		};
		var cranialNervesData=
		       {
				ameId:ameId,
				cranialNerves:cranialNerves,
				meningealSignIfAny:meningealSignIfAny,
				nutritionOfMuscles:nutritionOfMuscles,
				wasting:wasting,
				tone:tone,
				coordination:coordination,
				abnormalMovementFasiculation: abnormalMovementFasiculation,
				power:power,
				dtr:dtr
				
				
		};
		
		var reflexesData={
			ameId:ameId,
				plantar:plantar,
				abdominal:abdominal,
				cerebellarSign:cerebellarSign,
				gowerSign:gowerSign
				
				
				
		}
		
		var sensorySystemsData={
			ameId:ameId,
			   
				reflexes:reflexes,
				rombergSign:rombergSign,
				slrTestLimbRight:slrTestLimbRight,
				slrTestLimbLeft:slrTestLimbLeft,
				fingerNoseTest:fingerNoseTest,
				skullAndBone:skullAndBone
		}
		
		var dataToSend={
				cnsData:cnsData,
				cranialNervesData:cranialNervesData,
				reflexesData:reflexesData,
				sensorySystemsData:sensorySystemsData
				
				
		}
		/* ===================header==================== */
		var token = $("meta[name='_csrf']").attr("content");
		var header = $("meta[name='_csrf_header']").attr("content");
		$('.error').text('');




		$.ajax({
			type: 'POST',
			url: 'validate-and-save-cns-cranialNerves-reflexes-and-sensory-systems',
			data:JSON.stringify(dataToSend),
			contentType: 'application/json',
			beforeSend: function(xhr) {
				xhr.setRequestHeader(header, token);
			},
			success: function(response) {
				if (response.isValid) {
					 $('#alert-modal .modal-title').text('Success');
			            $('#alert-modal .modal-body h3').text(response.message);
			            
			            $('#alert-modal .modal-body i').removeClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
			                                             .addClass('fas fa-check-circle faa-tada animated')
			                                             .removeAttr('style');
			            
			            $("#cross-close-button").attr('onclick', 'backToHome()');
			            $("#okay-close-button").attr('onclick', 'backToHome()');
			            $('#alert-modal').modal({
			                backdrop: 'static',
			                keyboard: false
			              });
						  	            $('#alert-modal').modal('show');
					 }

				else {  
					
					$.each(response.errors, function(field, errorMessage) {
						 $('#' + field + '_error').text(errorMessage);
						 });
					}
				
},
complete: function() {
    $('#loading-overlay').hide();
    $('body').removeClass('loading');
},
			error: function(xhr, status, error) {
				if(xhr.responseText){

					$('#alert-modal .modal-title').text('ERROR');
		            $('#alert-modal .modal-body h3').text(xhr.responseText);
		            
		           $('#alert-modal .modal-body i')  .addClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
	               .css('color', 'red');
		           $('#alert-modal').modal({
		                backdrop: 'static',
		                keyboard: false
		              });
		            $('#alert-modal').modal('show');
				}
					
					else{
						$('#alert-modal .modal-title').text('ERROR');
			            $('#alert-modal .modal-body h3').text('Server not responding please sign-in again');
			            
			            $('#alert-modal .modal-body i').addClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
		                                               .css('color', 'red');
			            $('#alert-modal').modal({
			                backdrop: 'static',
			                keyboard: false
			              });
			            $('#alert-modal').modal('show');
						
					}
			}
		});
	});
});


//-------------Default values----------//
function setDefaultValues() {
	
	var memoryRecentRemote=$("#memoryRecentRemote").val();
	var intelligence=$("#intelligence").val();
	var personality=$("#personality").val();
	var orientation=$("#orientation").val();
	
	var cranialNerves=$("#cranialNerves").val();
	var meningealSignIfAny=$("#meningealSignIfAny").val();

	var nutritionOfMuscles=$("#nutritionOfMuscles").val();
	var wasting=$("#wasting").val();
	var tone=$("#tone").val();
	var coordination=$("#coordination").val();
	var abnormalMovementFasiculation=$("#abnormalMovementFasiculation").val();
	var power=$("#power").val();
	var dtr=$("#dtr").val();
	
	var plantar=$("#plantar").val();
	var abdominal=$("#abdominal").val();
	var cerebellarSign=$("#cerebellarSign").val();
	var gowerSign=$("#gowerSign").val();
	
	var reflexes=$("#reflexes").val();
	var rombergSign=$("#rombergSign").val();
	var slrTestLimbRight=$("#slrTestLimbRight").val();
	var slrTestLimbLeft=$("#slrTestLimbLeft").val();
	var fingerNoseTest=$("#fingerNoseTest").val();
	var skullAndBone=$("#skullAndBone").val();
	    
  
   if(!memoryRecentRemote){
   	$("#memoryRecentRemote").val('Intact');
   	}
   if(!intelligence){
	   	$("#intelligence").val('Normal');
	   	}
   if(!personality){
	   	$("#personality").val('Normal');
	   	}
   if(!orientation){
	   	$("#orientation").val('Oriented');
	   	}
   
   if(!cranialNerves){
	   	$("#cranialNerves").val('NAD');
	   	}
   
   if(!meningealSignIfAny){
	   	$("#meningealSignIfAny").val('NAD');
	   	}
   
   if(!nutritionOfMuscles){
	   	$("#nutritionOfMuscles").val('Well Nourished');
	   	}
   if(!wasting){
	   	$("#wasting").val('Absent');
	   	}
   if(!tone){
	   	$("#tone").val('NORMAL');
	   	}
   
   if(!coordination){
	   	$("#coordination").val('Normal');
	   	}
   if(!abnormalMovementFasiculation){
	   	$("#abnormalMovementFasiculation").val('Absent');
	   	}
   if(!power){
	   	$("#power").val('5/5');
	   	}
   if(!dtr){
	   	$("#dtr").val('Normal');
	   	}
   
   if(!plantar){
	   	$("#plantar").val('Upward');
	   	}
   
   if(!abdominal){
	   	$("#abdominal").val('Normal');
	   	}
   
   if(!cerebellarSign){
	   	$("#cerebellarSign").val('Absent');
	   	}
   
   if(!gowerSign){
	   	$("#gowerSign").val('Absent');
	   	}
   
   if(!reflexes){
	   	$("#reflexes").val('NAD');
	   	}
   
   if(!rombergSign){
	   	$("#rombergSign").val('Absent');
	   	}
   
   if(!slrTestLimbRight){
	   	$("#slrTestLimbRight").val('90');
	   	}
   
   if(!slrTestLimbLeft){
	   	$("#slrTestLimbLeft").val('90');
	   	}
   
   if(!fingerNoseTest){
	   	$("#fingerNoseTest").val('NAD');
	   	}
   
   if(!skullAndBone){
	   	$("#skullAndBone").val('NAD');
	   	}
   }

//---------------------load previous data---------------------//

$(document).ready(function(){
	  $("#load-previous-ame-form-data").click(function(){
		  event.preventDefault();
		$('#loading-overlay').show();
		$('body').addClass('loading');
		
    const token = $("meta[name='_csrf']").attr("content");
	const header = $("meta[name='_csrf_header']").attr("content");
	const formId='CNSCNRS';
	const candidateForcePersonnelId=$("#candidateForcePersonnelId").val();
	
	dataToSend={
			formId:formId,
			candidateForcePersonnelId:candidateForcePersonnelId
	},
		 $.ajax({
			 type:"POST",
			 url:'get-force-personnel-previous-ame-forms-details',
			 data:JSON.stringify(dataToSend),
			 contentType:"application/JSON",
			 beforeSend: function(xhr) {
					xhr.setRequestHeader(header, token);
				},
		     success:function(response){
		    	 if(response.isValid){
		    		 
		    		//--------------------- CNS ---------------------//
		    		 
		    		    $("#higherFunctions").val(response.centralNervousSystemByAmeIdData.higherFunctions);
		    			$("#memoryRecentRemote").val(response.centralNervousSystemByAmeIdData.memoryRecentRemote);
		    			$("#intelligence").val(response.centralNervousSystemByAmeIdData.intelligence);
		    			$("#personality").val(response.centralNervousSystemByAmeIdData.personality);
		    			$("#orientation").val(response.centralNervousSystemByAmeIdData.orientation);
		    	  
		    		//--------------------- CN ---------------------//	
		    		
		    		    $("#cranialNerves").val(response.cranialNervesMeningealSignByAmeIdData.cranialNerves);
		    			$("#meningealSignIfAny").val(response.cranialNervesMeningealSignByAmeIdData.meningealSignIfAny);
                        $("#nutritionOfMuscles").val(response.cranialNervesMeningealSignByAmeIdData.nutritionOfMuscles);
		    			$("#wasting").val(response.cranialNervesMeningealSignByAmeIdData.wasting);
		    			$("#tone").val(response.cranialNervesMeningealSignByAmeIdData.tone);
		    			$("#coordination").val(response.cranialNervesMeningealSignByAmeIdData.coordination);
		    			$("#abnormalMovementFasiculation").val(response.cranialNervesMeningealSignByAmeIdData.abnormalMovementFasiculation);
		    			$("#power").val(response.cranialNervesMeningealSignByAmeIdData.power);
		    			$("#dtr").val(response.cranialNervesMeningealSignByAmeIdData.dtr);
		    		
		    		//--------------------- Reflexes ---------------------//	
		    		    
		    	    	$("#plantar").val(response.reflexesByAmeIdData.plantar);
		    			$("#abdominal").val(response.reflexesByAmeIdData.abdominal);
		    			$("#cerebellarSign").val(response.reflexesByAmeIdData.cerebellarSign);
		    			$("#gowerSign").val(response.reflexesByAmeIdData.gowerSign);
		    			
		    		//--------------------- Sensory Systems ---------------------//	
		    			
		    		   $("#reflexes").val(response.sensorySystemByAmeIdData.reflexes);
		    		   $("#rombergSign").val(response.sensorySystemByAmeIdData.rombergSign);
		    		   $("#slrTestLimbRight").val(response.sensorySystemByAmeIdData.slrTestLimbRight);
		    		   $("#slrTestLimbLeft").val(response.sensorySystemByAmeIdData.slrTestLimbLeft);
		    		   $("#fingerNoseTest").val(response.sensorySystemByAmeIdData.fingerNoseTest);
		    		   $("#skullAndBone").val(response.sensorySystemByAmeIdData.skullAndBone);
		    			
		    		 
		    		  
		    			
		   			   $('#alert-modal .modal-title').text('Success');
			           $('#alert-modal .modal-body h3').text(response.message);
			           $('#alert-modal .modal-body i').removeClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
			                                             .addClass('fas fa-check-circle faa-tada animated')
			                                             .removeAttr('style');
			            
			            $('#alert-modal').modal({
			                backdrop: 'static',
			                keyboard: false
			              });
	    	           $('#alert-modal').modal('show');
	    		
		    		
		    	 }
		    	 else{
		    		 $('#alert-modal .modal-title').text('ERROR');
			         $('#alert-modal .modal-body h3').text(response.errors.noRecordAvailable);
			         $('#alert-modal .modal-body i').addClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
		                                               .css('color', 'red');
			         $('#alert-modal').modal({
			                backdrop: 'static',
			                keyboard: false
			              });
			         $('#alert-modal').modal('show');
		    	 }
		    	 
		    	
		    	 
		     },
		 complete:function(){
			   $('#loading-overlay').hide();
			   $('body').removeClass('loading');
		 },
			error: function(xhr, status, error) {
				if(xhr.responseText){

					$('#alert-modal .modal-title').text('ERROR');
		            $('#alert-modal .modal-body h3').text(xhr.responseText);
		            
		           $('#alert-modal .modal-body i')  .addClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
	               .css('color', 'red');
		           $('#alert-modal').modal({
		                backdrop: 'static',
		                keyboard: false
		              });
		            $('#alert-modal').modal('show');
				}
					
					else{
						$('#alert-modal .modal-title').text('ERROR');
			            $('#alert-modal .modal-body h3').text('Server not responding please sign-in again');
			            
			            $('#alert-modal .modal-body i').addClass('fas fa-exclamation-circle fa-lg animate__animated animate__shakeX')
		                                               .css('color', 'red');
			            $('#alert-modal').modal({
			                backdrop: 'static',
			                keyboard: false
			              });
			            $('#alert-modal').modal('show');
						
					}
			}
		 })
		  
	  })
	  
})





</script>

</body>

</html>